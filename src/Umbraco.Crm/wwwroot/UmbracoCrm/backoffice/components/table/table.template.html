<div>
    <div class="umb-table client-craft" ng-if="items">
        <!-- Table Header -->
        <div class="umb-table-head">
            <div class="umb-table-row">
                <div 
                    class="umb-table-cell umb-table__{{column.alias}} not-fixed" 
                    ng-repeat="column in columns" 
                >
                    <a 
                      class="umb-table-head__link" 
                      title="Sort by {{ column.header }}" 
                      href="#"
                      ng-click="onSort({column: column})"
                      ng-class="{'sortable': column.sortable}" 
                      prevent-default
                    >
                        <span ng-bind="column.header"></span>
                        <i 
                          ng-if="column.sortable"
                          class="umb-table-head__icon icon" 
                          ng-class="{
                            'icon-navigation-up': isSortDirection({columnAlias: column.alias, direction: 'asc'}),
                            'icon-navigation-down': isSortDirection({columnAlias: column.alias, direction: 'desc'})
                          }"
                        ></i>
                    </a>
                </div>
                <div class="umb-table-cell umb-table__actions">
                    <localize key="general_actions">Actions</localize>
                </div>
            </div>
        </div>
        <!-- Table Body -->
        <div class="umb-table-body" ng-if="items.length > 0">
            <div 
                class="umb-table-row"
                ng-repeat="item in items"
                ng-class="{
                    '-selected': item.selected,
                    '-published': item.published,
                    '-unpublished': !item.published,
                    'with-unpublished-version': !item.published && item.hasPublishedVersion
                }"
                ng-click="onSelectItem({item: item, $index: $index, $event: $event})"
            >
                <div 
                    class="umb-table-cell umb-table__{{column.alias}} not-fixed" 
                    ng-repeat="column in columns" 
                >
                    
                    <a
                      ng-if="column.alias === 'name'" 
                      title="{{ item.name }}" 
                      class="umb-table-body__link"
                      ng-click="openViewItem(item)"
                      ng-bind="item.name"
                    ></a>

                    <span ng-if="column.alias !== 'name'" title="{{column.header}}: {{item[column.alias]}}">
                    
                        <!-- Pills for Tags -->
                        <span ng-if="column.alias === 'tags'">
                            <span 
                              class="umb-table-pill" 
                              ng-repeat="tag in item[column.alias]" 
                              ng-bind="tag.name || tag"
                            ></span>
                        </span>

                        <span ng-if="column.alias === 'status'">
                            <span 
                              class="umb-table-pill"
                              ng-class="{
                                'umb-table-pill--primary': item[column.alias].color === 'primary',
                                'umb-table-pill--success': item[column.alias].color === 'success',
                                'umb-table-pill--warning': item[column.alias].color === 'warning',
                                'umb-table-pill--danger': item[column.alias].color === 'danger',
                                'umb-table-pill--secondary': item[column.alias].color === 'secondary',
                                'umb-table-pill--default': !item[column.alias].color || item[column.alias].color === 'default'
                              }"
                              ng-bind="item[column.alias].label"
                            ></span>
                        </span>

                        <!-- Avatar for Owner -->
                        <span ng-if="column.alias === 'owner'">
                            <img 
                              ng-if="item[column.alias].photo.file_path" 
                              class="umb-table-avatar" 
                              ng-src="{{item[column.alias].photo.file_path}}" 
                              alt="{{ item[column.alias].name }}"
                            />
                        </span>

                        <span ng-if="column.alias === 'photo'">
                            <img 
                              ng-if="item[column.alias].file_path" 
                              class="umb-table-avatar" 
                              ng-src="{{item[column.alias].file_path}}" 
                              alt="{{ item[column.alias].name }}" 
                            />
                        </span>

                        <!-- Avatar Group for Deputies -->
                        <span ng-if="column.alias === 'deputies'">
                            <span class="umb-table-avatar-group">
                                <span ng-repeat="deputy in item[column.alias]">
                                    <div ng-if="!deputy.photo.file_path" class="umb-table-avatar avatar-1">{{ vm.nameToAcronym(deputy.name) }}</div>
                                    <img ng-if="deputy.photo.file_path" class="umb-table-avatar" ng-src="{{ deputy.photo.file_path }}" alt="{{ deputy.name }}" />
                                </span>
                            </span>
                        </span>
                        
                        <!-- Default Fallback for Other Properties -->
                        <span ng-if="column.alias !== 'photo' && column.alias !== 'tags' && column.alias !== 'status' && column.alias !== 'owner' && column.alias !== 'deputies'">
                            <div ng-if="!column.isSensitive">{{ item[column.alias] }}</div>
                            <em ng-show="column.isSensitive" class="muted">
                                <localize key="content_isSensitiveValue_short"></localize>
                            </em>
                        </span>
                    </span>
                </div>
                <div class="umb-table-cell umb-table-body__actions">
                    <div class="umb-table-body__actions">
                        <button type="button" class="umb-table-body-action__button" ng-click="openEditDrawer(item)">
                            <i class="icon icon-edit"></i>
                        </button>
                        <button type="button" class="umb-table-body-action__button" ng-click="openDeleteDialog(item)">
                            <i class="icon icon-trash-alt-2"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Table Navigation -->
    <div ng-if="items.length > 0" class="client-craft-table-footer">
        {{vm.links}}
        <button 
            ng-click="btPaginationOnClick(links.first)" 
            ng-class="{'active': links.first && meta.first_page !== meta.current_page}"
        >
            First
        </button>
        <button 
            ng-click="btPaginationOnClick(links.prev)" 
            ng-class="{'active': links.prev}"
        >
            Prev
        </button>
        <button 
            ng-click="btPaginationOnClick(links.next)" 
            ng-class="{'active' : links.next}"
        >
            Next
        </button>
        <button 
            ng-click="btPaginationOnClick(links.last)" 
            ng-class="{'active': links.last && meta.last_page !== meta.current_page}"
        >
            Last
        </button>
    </div>

    <!-- Empty State -->
    <umb-empty-state ng-if="items.length === 0 " position="center">
        <localize key="content_listViewNoItems">There are no items to show in the list.</localize>
    </umb-empty-state>
</div>